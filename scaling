#include<stdio.h>
#include<GL/glut.h>
#include<math.h>
#include<stdlib.h>
int v,i,j,k;
float input[3][10],output[3][10],scale[3][3];


int xa,ya,xb,yb;

void mul(float input[3][10],float output[3][10],float scale[3][3],int v){
	for(i=0;i<3;i++){
		for(j=0;j<v;j++){
			output[i][j]=0;
			for(k=0;k<3;k++){
				output[i][j]+=scale[i][k]*input[k][j];
			}
		}
	}
}

void scaling(){
	printf("vertices:");
	scanf("%d",&v);
	for(i=0;i<v;i++){
		printf("x:");
		scanf("%f",&input[0][i]);
		printf("y:");
		scanf("%f",&input[1][i]);
		input[2][i]=1;
	}
	int sx,sy;
	int xf,yf;
	printf("sx and sy");
	scanf("%d%d",&sx,&sy);
	printf("xf and yf");
	scanf("%d%d",&xf,&yf);
	
	scale[0][0]=sx;
	scale[0][1]=0;
	scale[0][2]=xf*(1-sx);
	
	scale[1][0]=0;
	scale[1][1]=sy;
	scale[1][2]=yf*(1-sy);
	
	scale[2][0]=0;
	scale[2][1]=0;
	scale[2][2]=1;
	//printf("\n");
	for(i=0;i<3;i++){
		for(j=0;j<3;j++){
			printf("\t%f",scale[i][j]);
		}
		printf("\n");
	}
	mul(input,output,scale,v);
	printf("\n");
	for(i=0;i<3;i++){
		for(j=0;j<v;j++){
			printf("\t%f",output[i][j]);
		}
		printf("\n");
	}
	
}


void Bline(int xa,int ya,int xb,int yb)
{
		int dx,dy,d;
		int c,r,f;
		
		dx = xb - xa;
		dy = yb - ya;
	
	if(abs(dx) > abs(dy))
	{
	
		d = 2 * abs(dy) - abs(dx);
		
		if(dx>0)
		{
			c=xa;
			r=ya;
			f=xb;
		}
		else
		{
			c=xb;
			r=yb;
			f=xa;
		}
while(f > c)
		{
			if(d < 0)
			{
				c = c + 1;
				d= d + 2 * abs(dy);
			}
			else
			{
				c = c + 1;
				
				if(dx > 0 && dy > 0 || dx < 0 && dy < 0)
				{
					r = r + 1;
				}
				else
				{
					r = r - 1;
				}
				d = d + 2 * abs(dy) - 2 * abs(dx);
			}
			glVertex2d(c,r);			
	
		}
		
	}
	
	else
{
		d = 2 * abs(dx) - abs(dy);
		
		if(dy>0)
		{
			c=xa;
			r=ya;
			f=yb;
		}
		else
		{
			c=xb;
			r=yb;
			f=ya;
		}
		
		while(f > r)
		{
			if(d < 0)
			{
				r = r + 1;
				d= d + 2 * abs(dx);
			}
			else
			{
				r = r + 1;
				if(dx > 0 && dy > 0 || dx < 0 && dy < 0)
				{
					c = c + 1;
				}
				else
				{
					c = c - 1;
				}
				d = d + 2 * abs(dx) - 2 * abs(dy);
			}
			glVertex2d(c,r);			
	
		}
	}
}


void draw(){
	glClear(GL_COLOR_BUFFER_BIT);
	glBegin(GL_POINTS);
int i;
    for(i=0;i<v-1;i++){
    Bline(input[0][i],input[1][i],input[0][i+1],input[1][i+1]);
	}Bline(input[0][i],input[1][i],input[0][0],input[1][0]);
	
	for(i=0;i<v-1;i++){
    Bline(output[0][i],output[1][i],output[0][i+1],output[1][i+1]);
	}Bline(output[0][i],output[1][i],output[0][0],output[1][0]);
	glEnd();
	glFlush();
}

int main(int args,char**argv){
	scaling();
	/*printf("\nEnter First Coordinate: ");
		scanf("%d%d",&xa,&ya);
		
		printf("\nEnter Second Coordinate: ");
		scanf("%d%d",&xb,&yb);*/

	glutInit(& args,argv);
	glutInitDisplayMode(GLUT_SINGLE|GLUT_RGB);
	glutInitWindowPosition(0,0);
	glutInitWindowSize(640,480);
	glutCreateWindow("cg");
	glClearColor(1.0,1.0,1.0,0);
	glColor3f(0,0,0);
	gluOrtho2D(0,640,0,480);
	glutDisplayFunc(draw);
	glutMainLoop();
	return 0;
}
